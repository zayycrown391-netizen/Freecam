<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OnlyBans Menu</title>
    <!-- 1. Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 2. Load Google Font (Inter) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- 3. Load an icon library -->
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

    <style>
        /* 3. Custom CSS for the "PERFECTED" theme
        */
        
        /* --- Animated Aurora Background --- */
        @keyframes aurora {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(-45deg, #0f0f0f, #1a1a1a, #0a0a0a, #05190E, #1f232a);
            background-size: 400% 400%;
            animation: aurora 20s ease-in-out infinite;
            color: #d1d5db;
            /* --- NEW: Hide scrollbars from grid --- */
            overflow: hidden;
        }

        /* --- REMOVED: High-Tech Grid Background --- */
        /* body::before { ... } */
        /* (This is now moved to the #menu-container) */


        /* --- Sidebar Nav Tab Styling --- */
        .tab-button {
            transition: all 0.2s ease-in-out;
            color: #a0aec0;
            font-weight: 600;
            padding: 0.75rem 1rem;
            border-left: 3px solid transparent;
            display: flex;
            align-items: center;
            /* --- NEW: For Glint Effect --- */
            position: relative;
            overflow: hidden;
        }
        .tab-button.active {
            color: #22c55e;
            border-left-color: #22c55e;
            background-color: rgba(31, 35, 42, 0.7);
            box-shadow: 4px 0 15px -3px rgba(34, 197, 94, 0.3);
        }
        .tab-button:not(.active):hover {
            color: #e2e8f0;
            background-color: rgba(58, 63, 71, 0.6);
        }
        
        /* --- NEW: Glint/Shine Hover Effect --- */
        .tab-button::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%; /* Start off-screen */
            width: 50%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent);
            transform: skewX(-25deg);
            transition: transform 0s ease-in-out;
        }
        .tab-button:not(.active):hover::after {
            transform: translateX(300%) skewX(-25deg);
            transition: transform 0.8s ease-in-out;
        }
        
        /* --- Icon styling --- */
        .tab-button ion-icon {
            font-size: 1.25rem;
            margin-right: 0.75rem;
            transition: transform 0.3s ease;
            z-index: 2; /* Keep icon above glint */
        }
        .tab-button span { /* Keep text above glint */
            z-index: 2;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1.1); }
            50% { transform: scale(1.2); }
        }
        
        .tab-button.active ion-icon {
            animation: pulse 1.5s ease-in-out infinite;
        }

        /* --- Smooth Tab Content Animation --- */
        .tab-content {
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
            display: none;
            position: absolute;
            top: 0; right: 0; bottom: 0; left: 0;
            padding: 2rem 2.5rem;
        }
        .tab-content.active {
            opacity: 1;
            visibility: visible;
            display: block;
        }

        /* --- Staggered Item Animation --- */
        .menu-item {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s cubic-bezier(0.25, 1, 0.5, 1);
        }
        .menu-item.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* --- Toggle Switch (Polished) --- */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 40px;
            height: 22px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #4b5563;
            transition: .3s ease;
            border-radius: 9999px;
        }
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        input:checked + .toggle-slider {
            background-color: #22c55e;
        }
        input:checked + .toggle-slider:before {
            transform: translateX(18px);
        }

        /* --- Range Slider (Polished) --- */
        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 6px;
            background: #2a2f37;
            border-radius: 9999px;
            outline: none;
            opacity: 1;
            transition: all 0.2s ease;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            background: #ffffff;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid #22c55e;
            box-shadow: 0 0 10px rgba(34, 197, 94, 0.7), 0 0 5px rgba(34, 197, 94, 0.5);
            transition: all 0.2s ease;
        }
        input[type="range"]::-webkit-slider-thumb:active {
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(34, 197, 94, 1);
        }
        
        input[type="range"]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            background: #ffffff;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid #22c55e;
            box-shadow: 0 0 10px rgba(34, 197, 94, 0.7), 0 0 5px rgba(34, 197, 94, 0.5);
        }
        input[type="range"]::-moz-range-thumb:active {
            transform: scale(1.1);
        }

        /* --- Polished Text Input & Text Area --- */
        .macho-input, .macho-textarea {
            width: 100%;
            padding: 0.75rem;
            border-radius: 0.5rem;
            background-color: #2a2f37;
            border: 1px solid #3a3f47;
            color: #e5e7eb;
            outline: none;
            transition: all 0.2s ease-in-out;
        }
        .macho-input:focus, .macho-textarea:focus {
            border-color: #22c55e;
            box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.5);
        }
        .macho-textarea {
            height: 8rem; /* h-32 */
            resize: none;
        }

        /* --- Polished Button Styling --- */
        .macho-button {
            width: 100%;
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
            padding-left: 1rem;
            padding-right: 1rem;
            background-color: #22c55e;
            color: white;
            font-weight: 600;
            border-radius: 0.5rem;
            transition: all 0.2s ease-in-out;
            display: flex;
            align-items: center;
            justify-content: center;
            space-x: 0.5rem;
            line-height: 1.5rem; 
        }
        .macho-button:hover {
            background-color: #16a34a;
            box-shadow: 0 0 15px rgba(34, 197, 94, 0.5);
        }
        /* --- Compact Button for Input --- */
        .macho-button-compact {
            padding-top: 0.6rem;
            padding-bottom: 0.6rem;
            width: auto;
            flex-shrink: 0;
        }

        /* --- Keybind Button Styling --- */
        .keybind-button {
            font-family: 'Inter', sans-serif;
            font-size: 0.75rem;
            font-weight: 600;
            color: #a0aec0;
            background-color: #2a2f37;
            border: 1px solid #3a3f47;
            padding: 0.25rem 0.5rem;
            border-radius: 0.375rem;
            cursor: pointer;
            transition: all 0.2s ease;
            min-width: 50px;
            text-align: center;
        }
        .keybind-button:hover {
            background-color: #3a3f47;
            color: #e2e8f0;
        }
        .keybind-button.is-binding {
            color: #22c55e;
            border-color: #22c55e;
            box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.5);
        }


        /* --- Custom Alert Modal (Polished) --- */
        .custom-alert-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s;
        }
        .custom-alert-overlay.visible {
            opacity: 1;
            visibility: visible;
        }
        .custom-alert-box {
            background-color: rgba(31, 35, 42, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid #3a3f47;
            border-radius: 0.75rem;
            padding: 1.5rem;
            width: 90%;
            max-width: 400px;
            text-align: center;
            transform: scale(0.95);
            transition: transform 0.3s ease;
        }
        .custom-alert-overlay.visible .custom-alert-box {
            transform: scale(1);
        }
        /* --- Polished Alert Button --- */
        .custom-alert-box button {
            width: 100%;
            padding: 0.5rem 1rem;
            background-color: #22c55e;
            color: white;
            font-weight: 600;
            border-radius: 0.5rem;
            transition: all 0.2s ease-in-out;
        }
        .custom-alert-box button:hover {
            background-color: #16a34a;
            box-shadow: 0 0 15px rgba(34, 197, 94, 0.5);
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <!-- Main Menu Container -->
    <!-- --- NEW: Added id and relative positioning --- -->
    <div id="menu-container" class="w-full max-w-4xl bg-gradient-to-br from-[rgba(31,35,42,0.85)] to-[rgba(31,35,42,0.75)] backdrop-blur-lg rounded-xl shadow-2xl overflow-hidden flex min-h-[600px] border border-[rgba(58,63,71,0.5)] relative"
         style="box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3), 0 0 25px rgba(34, 197, 94, 0.1);">
        
        <!-- --- NEW: Mouse Spotlight Effect --- -->
        <div class="mouse-spotlight"></div>
        <style>
            #menu-container::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                /* The spotlight */
                background: radial-gradient(400px at var(--mouse-x) var(--mouse-y), rgba(34, 197, 94, 0.15), transparent 80%);
                pointer-events: none; /* Lets clicks pass through */
                border-radius: 0.75rem; /* rounded-xl */
                opacity: 0;
                transition: opacity 0.3s ease;
                z-index: 10; /* Above nav/main, below items */
                /* --- FIX: z-index must be above grid but below content --- */
                z-index: 15; 
            }
            #menu-container:hover::before {
                opacity: 1; /* Fade in on hover */
            }

            /* --- NEW: Grid INSIDE the menu --- */
            #menu-container::after {
                content: "";
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                /* Faint green grid lines */
                background-image: 
                    linear-gradient(rgba(34, 197, 94, 0.05) 1px, transparent 1px), 
                    linear-gradient(90deg, rgba(34, 197, 94, 0.05) 1px, transparent 1px);
                background-size: 40px 40px;
                z-index: 5; /* Behind spotlight and content */
                pointer-events: none;
                border-radius: 0.75rem; /* rounded-xl */
            }
        </style>
        
        <!-- Sidebar Navigation -->
        <!-- UPDATED: z-index is now 20 -->
        <nav class="w-1/4 bg-[rgba(42,47,55,0.7)] p-4 space-y-2 border-r border-[rgba(58,63,71,0.5)] relative z-20"> <!-- z-20 to be above spotlight -->
            <!-- Title -->
            <h2 class="text-xl font-bold mb-6 px-2 transition-all duration-300 hover:opacity-80" style="text-shadow: 0 0 5px rgba(255,255,255,0.1);">
                <span class="text-white">Only</span><span class="text-green-500">Bans</span>
            </h2>
            
            <!-- Tab Buttons -->
            <button data-tab="aim" class="tab-button w-full rounded-lg">
                <ion-icon name="locate-outline"></ion-icon>
                <span>Aim</span>
            </button>
            <button data-tab="visuals" class="tab-button w-full rounded-lg">
                <ion-icon name="eye-outline"></ion-icon>
                <span>Visuals</span>
            </button>
            <button data-tab="misc" class="tab-button w-full rounded-lg">
                <ion-icon name="hardware-chip-outline"></ion-icon>
                <span>Misc</span>
            </button>
            <button data-tab="triggers" class="tab-button w-full rounded-lg">
                <ion-icon name="flash-outline"></ion-icon>
                <span>Triggers</span>
            </button>
        </nav>

        <!-- Main Content Area -->
        <!-- UPDATED: z-index is now 20 -->
        <main class="w-3/4 relative z-20"> <!-- z-20 to be above spotlight -->
            
            <!-- Aim Tab Content -->
            <div id="aim" class="tab-content">
                <div id="aim-section-0" class="space-y-5">
                    <!-- Items will be added here by the API -->
                </div>
            </div>

            <!-- Visuals Tab Content -->
            <div id="visuals" class="tab-content">
                <div class="flex space-x-5">
                    <div id="visuals-section-0" class="w-1/2 space-y-5"></div>
                    <div id="visuals-section-1" class="w-1/2 space-y-5"></div>
                </div>
            </div>

            <!-- Misc Tab Content -->
            <div id="misc" class="tab-content">
                <div class="flex space-x-5">
                    <div id="misc-section-0" class="w-1/2 space-y-5"></div>
                    <div id="misc-section-1" class="w-1/2 space-y-5"></div>
                </div>
            </div>

            <!-- Triggers Tab Content -->
            <div id="triggers" class="tab-content">
                <div id="triggers-section-0" class="space-y-5">
                    <!-- Items will be added here by the API -->
                </div>
            </div>

        </main>
    </div>

    <!-- Custom Alert Modal HTML -->
    <div id="customAlert" class="custom-alert-overlay">
        <div class="custom-alert-box">
            <p id="customAlertMessage" class="text-lg text-white mb-6">This is an alert!</p>
            <button id="customAlertClose">
                Close
            </button>
        </div>
    </div>

    <!-- 4. JavaScript for Tab Logic and NEW API -->
    <script>
        // --- Keybind System Globals ---
        let keybinds = {};
        let keybindCallbacks = {};
        let currentlyBindingElement = null;


        // --- Custom Alert Function ---
        const customAlertOverlay = document.getElementById('customAlert');
        const customAlertMessage = document.getElementById('customAlertMessage');
        const customAlertClose = document.getElementById('customAlertClose');

        function showCustomAlert(message) {
            customAlertMessage.textContent = message;
            customAlertOverlay.classList.add('visible');
        }

        customAlertClose.addEventListener('click', () => {
            customAlertOverlay.classList.remove('visible');
        });

        // --- Slider Update Function ---
        function updateSlider(slider) {
            const valueSpan = slider.parentElement.nextElementSibling;
            const percent = ((slider.value - slider.min) / (slider.max - slider.min)) * 100;
            if (valueSpan) {
                valueSpan.innerText = slider.value;
            }
            slider.style.background = `linear-gradient(to right, #22c55e ${percent}%, #2a2f37 ${percent}%)`;
        }

        // --- Generate a unique ID ---
        function generateId(label) {
            return label.replace(/[^a-zA-Z0-9 ]/g, "").replace(/\s+/g, '-').toLowerCase();
        }

        // ---------------------------------------------------
        // --- "BRIDGE" FUNCTIONS ---
        // ---------------------------------------------------

        function MachoInjectResource(resource, luaString) {
            console.log("Sending Lua to game:", luaString);
            fetch('https://onlybans-menu/runLua', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json; charset=UTF-8' },
                body: JSON.stringify({ code: luaString })
            }).then(resp => resp.json()).then(resp => {
                console.log("Lua response:", resp);
            }).catch(err => {
                console.error("NUI Error:", err);
            });
        }

        function MachoMenuGetSelectedPlayer() {
            console.log("Getting selected player... (using placeholder: 1)");
            return 1; 
        }

        function CheckResource(resourceName) {
            return true;
        }

        // ---------------------------------------------------
        // --- Keybind System Functions ---
        // ---------------------------------------------------

        function startKeybind(element) {
            if (currentlyBindingElement) {
                currentlyBindingElement.classList.remove('is-binding');
                const oldId = currentlyBindingElement.dataset.keybindId;
                currentlyBindingElement.textContent = keybinds[oldId] || '[bind]';
            }
            currentlyBindingElement = element;
            element.classList.add('is-binding');
            element.textContent = '...';
        }

        function handleGlobalKeydown(event) {
            const activeEl = document.activeElement;
            if (activeEl && (activeEl.tagName === 'INPUT' || activeEl.tagName === 'TEXTAREA')) {
                if (event.key === 'Escape') {
                    activeEl.blur();
                }
                return;
            }

            if (currentlyBindingElement) {
                event.preventDefault();
                event.stopPropagation();
                
                const key = event.code;
                const featureId = currentlyBindingElement.dataset.keybindId;

                if (key === 'Escape' || key === 'Backspace') {
                    delete keybinds[featureId];
                    currentlyBindingElement.textContent = '[bind]';
                } else {
                    keybinds[featureId] = key;
                    currentlyBindingElement.textContent = key;
                }
                
                currentlyBindingElement.classList.remove('is-binding');
                currentlyBindingElement = null;

            } else {
                const pressedKey = event.code;
                const featureId = Object.keys(keybinds).find(id => keybinds[id] === pressedKey);
                
                if (featureId) {
                    event.preventDefault();
                    event.stopPropagation();
                    
                    const callbacks = keybindCallbacks[featureId];
                    if (!callbacks) return;

                    if (callbacks.toggleElement) {
                        const input = callbacks.toggleElement;
                        input.checked = !input.checked;
                        if (input.checked) {
                            callbacks.on();
                        } else {
                            callbacks.off();
                        }
                    } else if (callbacks.buttonCallback) {
                        callbacks.buttonCallback();
                    }
                }
            }
        }

        window.addEventListener('keydown', handleGlobalKeydown);


        // ---------------------------------------------------
        // --- MACHOMENU API ---
        // ---------------------------------------------------

        /**
         * Creates a new Toggle Switch feature.
         */
        function MachoMenuToggle(section, label, onCallback, offCallback, defaultChecked = false) {
            const featureId = generateId(label) + '-toggle';
            const wrapper = document.createElement('div');
            wrapper.className = "menu-item";
            
            const item = document.createElement('div');
            item.className = "flex items-center justify-between";
            
            item.innerHTML = `
                <label class="font-medium text-base text-gray-200">${label}</label>
                <div class="flex items-center space-x-3">
                    <button class="keybind-button" data-keybind-id="${featureId}">[bind]</button>
                    <label class="toggle-switch">
                        <input id="${featureId}-input" type="checkbox" ${defaultChecked ? 'checked' : ''}>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            `;
            
            wrapper.appendChild(item);
            section.appendChild(wrapper);

            const toggleInput = item.querySelector(`#${featureId}-input`);
            
            toggleInput.addEventListener('change', () => {
                if (toggleInput.checked) {
                    onCallback();
                } else {
                    offCallback();
                }
            });

            keybindCallbacks[featureId] = { 
                on: onCallback, 
                off: offCallback, 
                toggleElement: toggleInput 
            };
            
            item.querySelector('.keybind-button').addEventListener('click', (e) => {
                if(document.activeElement) document.activeElement.blur();
                startKeybind(e.currentTarget);
            });
        }

        /**
         * Creates a new Slider feature. (Keybinds REMOVED)
         */
        function MachoMenuSlider(section, label, min, max, defaultValue) {
            const featureId = generateId(label) + '-slider';
            const wrapper = document.createElement('div');
            wrapper.className = "menu-item";
            
            const item = document.createElement('div');
            item.className = "flex items-center justify-between space-x-4";
            
            item.innerHTML = `
                <label class="font-medium text-base text-gray-200">${label}</label>
                <div class="flex-1">
                    <input id="${featureId}-input" type="range" min="${min}" max="${max}" value="${defaultValue}" class="w-full">
                </div>
                <span class="font-mono text-gray-400 w-10 text-right">${defaultValue}</span>
            `;
            
            wrapper.appendChild(item);
            section.appendChild(wrapper);
            
            const sliderInput = item.querySelector(`#${featureId}-input`);
            sliderInput.addEventListener('input', () => updateSlider(sliderInput));
            updateSlider(sliderInput);
        }

        /**
         * Creates a new Button feature.
         */
        function MachoMenuButton(section, label, callback) {
            const featureId = generateId(label) + '-button';
            const wrapper = document.createElement('div');
            wrapper.className = "menu-item";
            
            const item = document.createElement('div');
            item.className = "flex items-center space-x-3";
            
            const button = document.createElement('button');
            button.className = "macho-button flex-1";
            button.textContent = label;
            
            button.addEventListener('click', callback);
            
            const bindButton = document.createElement('button');
            bindButton.className = "keybind-button";
            bindButton.dataset.keybindId = featureId;
            bindButton.textContent = "[bind]";
            bindButton.addEventListener('click', (e) => {
                if(document.activeElement) document.activeElement.blur();
                startKeybind(e.currentTarget);
            });

            item.appendChild(button);
            item.appendChild(bindButton);
            
            wrapper.appendChild(item);
            section.appendChild(wrapper);

            keybindCallbacks[featureId] = { 
                buttonCallback: callback
            };
        }

        /**
         * Creates a new Text Input feature. (Keybinds REMOVED)
         */
        function MachoMenuTextInput(section, label, placeholder = "") {
            const featureId = generateId(label) + '-text';
            const wrapper = document.createElement('div');
            wrapper.className = "menu-item";
            
            const item = document.createElement('div');
            item.className = "space-y-2";
            
            item.innerHTML = `
                <div class="flex items-center justify-between">
                    <label for="${featureId}-input" class="font-medium text-base text-gray-200 ml-1">${label}</label>
                </div>
                <input id="${featureId}-input" type="text" placeholder="${placeholder}" class="macho-input">
            `;
            
            wrapper.appendChild(item);
            section.appendChild(wrapper);
        }

        /**
         * --- Clean Input w/ Button --- (Keybinds REMOVED)
         */
        function MachoMenuInputButton(section, label, placeholder = "", buttonText = "Execute", callback) {
            const featureId = generateId(label) + '-input-btn';
            const wrapper = document.createElement('div');
            wrapper.className = "menu-item";
            
            const item = document.createElement('div');
            item.className = "space-y-2";
            
            const labelWrapper = document.createElement('div');
            labelWrapper.className = "flex items-center justify-between";
            labelWrapper.innerHTML = `
                <label class="font-medium text-base text-gray-200 ml-1">${label}</label>
            `;
            
            const inputWrapper = document.createElement('div');
            inputWrapper.className = "flex items-center space-x-2";
            
            const input = document.createElement('input');
            input.type = "text";
            input.placeholder = placeholder;
            input.className = "macho-input flex-1";
            
            const button = document.createElement('button');
            button.className = "macho-button macho-button-compact";
            button.innerHTML = `<span>${buttonText}</span>`;
            
            const executeCallback = () => {
                const value = input.value;
                if (value.trim() === "") {
                    showCustomAlert("Input is empty!");
                    return;
                }
                callback(value);
                input.value = "";
            };
            
            button.addEventListener('click', executeCallback);
            
            inputWrapper.appendChild(input);
            inputWrapper.appendChild(button);
            
            item.appendChild(labelWrapper);
            item.appendChild(inputWrapper);
            
            wrapper.appendChild(item);
            section.appendChild(wrapper);
        }


        // ---------------------------------------------------
        // --- APP LOGIC (Using new MachoMenu API) ---
        // ---------------------------------------------------
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- NEW: Mouse Spotlight Logic ---
            const menu = document.getElementById('menu-container');
            if (menu) {
                menu.addEventListener('mousemove', (e) => {
                    const rect = menu.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    menu.style.setProperty('--mouse-x', `${x}px`);
                    menu.style.setProperty('--mouse-y', `${y}px`);
                });
            }
            
            // --- API Tab Containers ---
            const MenuTabs = {
                Aim: document.getElementById('aim'),
                Visuals: document.getElementById('visuals'),
                Misc: document.getElementById('misc'),
                Triggers: document.getElementById('triggers')
            };
            
            // --- Get sections by ID ---
            const AimTabSections = [
                document.getElementById('aim-section-0')
            ];
            const VisualsTabSections = [
                document.getElementById('visuals-section-0'),
                document.getElementById('visuals-section-1')
            ];
            const MiscTabSections = [
                document.getElementById('misc-section-0'),
                document.getElementById('misc-section-1')
            ];
            const TriggersTabSections = [
                document.getElementById('triggers-section-0')
            ];


            // --- Populate Menu using the new API ---

            // --- Populate Aim Tab ---
            MachoMenuToggle(AimTabSections[0], "God Mode", 
                function() { // onCallback
                    MachoInjectResource(
                        "any",
                        `
                            if aXfPlMnQwErTyUi == nil then aXfPlMnQwErTyUi = false end
                            aXfPlMnQwErTyUi = true
                            CreateThread(function()
                                while aXfPlMnQwErTyUi do
                                    local dOlNxGzPbTcQ = PlayerPedId()
                                    SetEntityCanBeDamaged(dOlNxGzPbTcQ, false)
                                    SetEntityProofs(dOlNxGzPbTcQ, true, true, true, false, true, false, false, false)
                                    SetEntityInvincible(dOlNxGzPbTcQ, true)
                                    Wait(0)
                                end
                            end)
                        `
                    );
                },
                function() { // offCallback
                    MachoInjectResource(
                        "any",
                        `
                            aXfPlMnQwErTyUi = false
                            local dOlNxGzPbTcQ = PlayerPedId()
                            SetEntityCanBeDamaged(dOlNxGzPbTcQ, true)
                            SetEntityProofs(dOlNxGzPbTcQ, false, false, false, false, false, false, false, false)
                            SetEntityInvincible(dOlNxGzPbTcQ, false)
                        `
                    );
                },
                true // defaultChecked
            );
            MachoMenuSlider(AimTabSections[0], "Smooth", 0, 100, 75);
            MachoMenuSlider(AimTabSections[0], "FOV", 1, 360, 90);


            // --- Populate Visuals Tab ---
            MachoMenuToggle(VisualsTabSections[0], "Enable ESP", function() {
                MachoInjectResource("any", "print('ESP ON')");
            }, function() {
                MachoInjectResource("any", "print('ESP OFF')");
            }, true);
            MachoMenuToggle(VisualsTabSections[0], "Show Boxes", function() {
                MachoInjectResource("any", "print('Boxes ON')");
            }, function() {
                MachoInjectResource("any", "print('Boxes OFF')");
            }, true);

            MachoMenuToggle(VisualsTabSections[1], "Health Bar", function() {
                MachoInjectResource("any", "print('Health ON')");
            }, function() {
                MachoInjectResource("any", "print('Health OFF')");
            }, false);
            MachoMenuToggle(VisualsTabSections[1], "Snaplines", function() {
                MachoInjectResource("any", "print('Snaplines ON')");
            }, function() {
                MachoInjectResource("any", "print('Snaplines OFF')");
            }, false);

            
            // --- Populate Misc Tab ---
            MachoMenuToggle(MiscTabSections[0], "Bunnyhop", function() {
                MachoInjectResource("any", "print('Bhop ON')");
            }, function() {
                MachoInjectResource("any", "print('Bhop OFF')");
            }, false);

            MachoMenuTextInput(MiscTabSections[1], "Clantag", "Enter tag...");

            // --- Populate Triggers Tab ---
            MachoMenuToggle(TriggersTabSections[0], "Triggerbot", function() {
                MachoInjectResource("any", "print('Triggerbot ON')");
            }, function() {
                MachoInjectResource("any", "print('Triggerbot OFF')");
            }, true);
            MachoMenuSlider(TriggersTabSections[0], "Trigger Delay", 0, 500, 50);

            MachoMenuInputButton(TriggersTabSections[0], "Give Cash", "Enter amount...", "Give", 
                function(value) {
                    showCustomAlert(`Giving ${value} cash!`);
                    MachoInjectResource("any", `
                        local amount = tonumber("${value}") or 0
                        print('Giving ' .. amount .. ' cash')
                    `);
                }
            );


            // --- Tab Switching Logic ---
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');

            function switchTab(targetTabId) {
                tabButtons.forEach(btn => btn.classList.remove('active'));
                const activeButton = document.querySelector(`.tab-button[data-tab="${targetTabId}"]`);
                if (activeButton) {
                    activeButton.classList.add('active');
                }

                tabContents.forEach(content => {
                    content.classList.remove('active');
                    content.querySelectorAll('.menu-item').forEach(item => {
                        item.classList.remove('is-visible');
                        item.style.transitionDelay = '0ms';
                    });
                });
                
                const activeContent = document.getElementById(targetTabId);
                if (activeContent) {
                    activeContent.classList.add('active');
                    
                    const items = activeContent.querySelectorAll('.menu-item');
                    items.forEach((item, index) => {
                        item.style.transitionDelay = `${index * 50}ms`; // 50ms stagger
                    });
                    
                    setTimeout(() => {
                        items.forEach(item => item.classList.add('is-visible'));
                    }, 10);
                }
            }

            // Set first tab as active
            if (tabButtons.length > 0) {
                const defaultTabId = tabButtons[0].dataset.tab;
                switchTab(defaultTabId);
            }

            // Add click listeners
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    if (currentlyBindingElement) {
                        const oldId = currentlyBindingElement.dataset.keybindId;
                        currentlyBindingElement.textContent = keybinds[oldId] || '[bind]';
                        currentlyBindingElement.classList.remove('is-binding');
                        currentlyBindingElement = null;
                    }
                    const targetTab = button.dataset.tab;
                    switchTab(targetTab);
                });
            });
        });
    </script>

</body>
</html>
